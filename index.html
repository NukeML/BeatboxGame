<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"> 
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Beatbox Game</title>
  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
  <link rel="icon" type="image/x-icon" href="css/graphics/beatbox-ml-webicon.png">
  <link rel="stylesheet" type="text/css" href="css/index.css">
</head>
<body>

  <!-- Information Button -->
  <div class="info-container">
    <div class="infoButton"><i class="bx bx-info-circle"></i></div>
    More info
  </div>
  <!-- More about this game -->
  <div class="more-info-container">
    <p class="more-info-content">We are currently working on a project about AI beatboxing.<br><br> With this game, we aim to collect sound data to see how well the average person can imitate a professional's beatboxing.<br><br>If you already have some beatboxing skill/experience and would like to learn more about what we're working on, please contact Aaron Lee on beatml.webcontact@gmail.com for something more exciting than this game!</p>
  </div>

  <!----------------- HEADER ----------------->
  <div class="content-section-header">
    <h1 id="header">Beatbox Imitation Game</h1>
  </div>
  <span id="errorsAboveHere"></span>
  
  <!----------------------------------------------------- INTRODUCTION PAGE ----------------------------------------------------->
  <div class="introduction-page">
    <!-- Instructions -->
    <div class="instruction-container">
      <div class="instruction-content">
        <div class="instruction-header">Instructions:</div>
        * Please click <strong>"allow"</strong> to enable your microphone in the browser.
        <div class="instruction-header">An Example:</div>
        1. Play the reference beatbox clip:<br>
        <div class="audio-player-container">
          <div class="audio-player">
            <i class="bx bx-play-circle"></i>
            <div class="intro-waveform-container" id="waveform-container"></div>
          </div>
          <div class="audio-duration">00:00</div>
        </div>
        2. Try to mimic it:<br>
        <div class="audio-player-container">
          <div class="audio-player">
            <i class="bx bx-play-circle"></i>
            <div class="intro-waveform-container" id="waveform-container"></div>
          </div>
          <div class="audio-duration">00:00</div>
        </div>
        3. Done!<br><br>
      </div>
    </div>
    <!-- Navigate to next page -->
    <div class="button-container">
      <!-- Button to submit form -->
      <button class="navButton">I'm ready!</button>
    </div>
  </div>

  <!----------------------------------------------------- AUDIO RECORDING PAGE ----------------------------------------------------->
  <div class="audio-recording-page">
    <div class="content">
      <!-- Reference Clip Player & Recorder Section -->
      <div class="recording-section-container">
        <!-- Instuructions -->
        <div class="instruction-container">
          <p class="instruction-content"><strong>Reference Clip: </strong><span class="audioname" id="audioname"></span></p>
        </div>
        <!-- Method 1: Wavesurfer -->
        <div class="audio-player-container">
          <div class="audio-player">
            <i class="bx bx-play-circle"></i>
            <div class="waveform-container" id="waveform-container"></div>
          </div>
          <div class="audio-duration">00:00</div>
        </div>
        <!-- Method 2: Ugly default audio player -->
        <!-- <audio id="audio-source" controls>
          <source src="" type="audio/wav">
        </audio> -->
        <!-- Instuructions -->
        <div class="instruction-container">
          <p class="instruction-content">
            - Your recording should be <strong><span id="leastDuration">0</span>-<span id="mostDuration">0</span></strong> seconds long.
            <br>- Try to match its <strong>speed</strong> and <strong>duration</strong>!
          </p>
        </div>
        <!-- Recorder -->
        <div class="audio-player-container">
          <div class="recorder-container">
            <div id="timer">
              00.00
            </div>
          </div>
          <div class="recorder-container">
            <button id="recordButton" class="rbutton" type="button">Record</button><br>
          </div>
        </div>
        <!-- Post-recording Section -->
        <div class="after-recording-container">
          <!-- Instuructions -->
          <div class="instruction-container">
            <p class="instruction-content">
              GOOD JOB! Listen to your audio & feel free to record again!
            </p>
          </div>
          <!-- Audio player for user's recording -->
          <div class="audio-player-container">
            <div class="audio-player">
              <i class="bx bx-play-circle"></i>
              <div class="waveform-user-container" id="waveform-container"></div>
            </div>
            <div class="audio-duration">00:00</div> 
          </div>    
          <hr>   
          <!-- Button to submit form -->
          <div class="button-container">
            <button id="submitButton" class="sbutton" type="button">Submit</button>
          </div>
        </div>
      </div>
      <!-- Wave Monitor (Backup, now can use wavesurfer, a better visualisation technique) -->
      <!-- <div class="audio-player-container">
        <div class="recorder-container">
          <canvas class="visualizer"></canvas>
        </div>        
      </div> -->
    </div>
  </div>

  <!----------------------------------------------------- POST-SUBMIT PAGE ----------------------------------------------------->
  <div class="post-submit-page">
    <!------------------------------------------------------- Mailing List ------------------------------------------------------->
    <div class="mailing-signup-box">
      <div class="mailing-signup-container">
          <div class="mailing-header">
              <h1><i class="bx bxs-envelope"></i>Join our newsletter!</h1>
          </div>
          <form class="mailing-form-container" id="mailing-form">
              <div class="mailing-form-header">
                  <h2>Click the Join button below to join our newsletter for MORE AMAZING UPDATES on our project as you wish!</h2>
                  <div class="newsletter-input-box-container">
                      <div class="newsletter-input-box">
                          <div class="error-text newsletter-email">* Required</div>
                          <input type="text" class="newsletter-input-field" id="newsletterEmailAddress" placeholder="Enter your email">
                      </div>
                      <div class="newsletter-input-box">
                          <input type="button" class="subscribe" id="newsletter-subscribe" value="Join">
                      </div>
                  </div>
              </div>
          </form>
      </div>
    </div>
    <div class="instruction-container">
      <div class="instruction-content">
        Follow our social media account to REVEAL our project SECRETS!
        <div type="button" class="social-media-link" onclick="window.open('https://www.instagram.com/beatbox.ml/','_blank')"><img src="css/graphics/beat-ml-logo-circular.png"><i class="bx bxl-instagram"></i>@beatbox.ml</div>
        Find out more professional beatboxing clips to mimic below!
        </div>
    </div>
    <div class="button-container">
      <button class="navbackButton">Play Again</button>
    </div>
  </div>
  

  <!-- ERROR MESSAGE -->
  <template id="errorMsg">
    <div class="error-msg"><br>
      <h3 class="error-msg-innertext"></h3>
      <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
    </div>
  </template>
  
  <script type="module" src="src/record_submit.js"></script>
  <script src="src/control.js"></script>
  
</body>
</html>
