<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Beatbox Game</title>
  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
  <link rel="icon" type="image/x-icon" href="css/graphics/beatbox-ml-webicon.png">
  <link rel="stylesheet" type="text/css" href="css/index.css">
</head>

<body>

  <!-- Information Button -->
  <div class="info-container">
    <div class="info-text">
      More info
    </div>
    <div class="infoButton">
      <i class="bx bx-info-circle"></i>
    </div>

  </div>
  <!-- More about this game -->
  <div class="more-info-container">
    <p class="more-info-content">We are currently working on an AI music project.<br><br> With this no-stakes game, we
      aim to collect sound data to analyse the average person's attempt at beatboxing.<br><br>If you already have some
      beatboxing skill/experience and would like to learn more about our project, please contact Aaron Lee
      on<br><br><i>beatML.webcontact@gmail.com</i><br><br>or send us a direct message on
      Instagram<br><br><i>@beatbox.ML</i><br><br>to discuss with us!</p>
  </div>

  <!------------------------------------------------- CONSENT AGREEMENT POP-UP ------------------------------------------------->
  <div class="consent-agreement-box hidden">
    <div class="consent-agreement-container">
      <h1 class="consent-agreement-header">
        For legal reasons,
        please scroll through and read the Informed Consent conditions below so we can accept your submission of audio data in the next page.
      </h1>
      <div class="consent-agreement-content">
        <ul>
          <li>
            The type of data to be collected is a short audio recording of the participant’s (your) unserious attempt at imitating beatboxing rhythms, as illustrated on this page you were just viewing before you clicked the "I'm ready!" button.
          </li><br>
          <li>
            The collected data will be used for machine learning model training purposes.
          </li><br>
          <li>
            The research is done by the upcoming music technology startup known as Beatbox-ML, the sole developers of this webpage hosted on <i>https://nukeml.github.io/BeatboxGame/</i> . We are contactable via email on beatML.webcontact@gmail.com or through Instagram direct messaging @beatbox.ML . Any other individuals or organisations claiming the name Beatbox-ML but not contactable through the means described above are not us, and we cannot be liable for any actions done by such entities.
          </li><br>
          <li>
            The data collected will be kept in a secure external database, only accessible by the developers of this webpage. 
          </li><br>
          <li>
            The data will be kept indefinitely due to the uncertainties in machine learning model development.
          </li><br>
          <li>
            The data is collected anonymously: it cannot be traced back to you. As such, we will be unable to process requests from you to delete your data from our database, as we will be unable to link any collected data to any specific participant.
          </li><br>
          <li>
            We reserve the right to publish our database in the future, making clear the same purpose of machine learning model training. Any data collected will remain anonymous and untraceable.
          </li><br>
          <li>
            After submitting your audio recording, there is an optional field to enter your email address to subscribe to our newsletter. The submission and storage of participants’ email addresses is completely separate to the submission and storage of the audio recording, and the two cannot be linked within our system. So, any audio data submitted remains anonymous, even if you choose to submit your email address afterwards.
          </li>
        </ul>
      </div>
      <h2 class="consent-agreement-instruction">
        By clicking the <strong>“Understood, happy to help!”</strong> button on the right below, you confirm that you agree to the above conditions for our use of your input in the next page. (so we won’t get sued!)<br>
        If you click the <strong>“No, sorry…”</strong> button on the left below, you will not continue on to the next page where your input may be taken.
      </h2>
      <div class="consent-agreement-control-panel">
        <button type="button" class="consent-button disagree-button" disabled>
          No, sorry...
        </button>
        <button type="button" class="consent-button agree-button" disabled>
          Understood, happy to help!
        </button>
      </div>
    </div>
  </div>

  <!----------------- HEADER ----------------->
  <div class="content-section-header">
    <h1 id="header">Beatbox Imitation Game</h1>
  </div>
  <span id="errorsAboveHere"></span>

  <!----------------------------------------------------- INTRODUCTION PAGE ----------------------------------------------------->
  <div class="introduction-page">
    <!-- Instructions -->
    <div class="instruction-container">
      <div class="instruction-content">
        <div class="instruction-header">Welcome!</div>
        <div class="instruction-header">Here are the instructions for the game on the next page:</div>
        <h5 class="left">
          1. Allow <i class='bx bxs-microphone'  ></i> microphone permissions when prompted
        </h5>
        <h5 class="left">
          2. Listen to the randomly provided professional beatbox clip, e.g.:
        </h5>
        <div class="audio-player-container left">
          <div class="audio-player">
            <i class="bx bx-play-circle"></i>
            <div class="waveform-container intro-waveform-container"></div>
          </div>
          <div class="audio-duration">00:00</div>
        </div>
        <h5 class="right">3. Try to mimic the rhythm <span class="equalizer-icon"><i class='bx bx-equalizer'></i></span>
          e.g.:<br></h5>
        <div class="audio-player-container right">
          <div class="audio-player">
            <i class="bx bx-play-circle"></i>
            <div class="waveform-container intro-waveform-container"></div>
          </div>
          <div class="audio-duration">00:00</div>
        </div>
      </div>
    </div>

    <div class="instruction-container">
      <div class="instruction-content less-padding less-margin">
        <p>Please ensure your browser is <strong>up-to-date</strong> before playing.<br>
        Also, this game will not function properly on <strong>Android Firefox</strong> due to known issues in the browser itself.</p>
      </div>
    </div>

    <!-- Navigate to next page -->
    <div class="button-container">
      <!-- Button to submit form -->
      <button class="navButton">I'm ready!</button>
    </div>
  </div>

  <!----------------------------------------------------- AUDIO RECORDING PAGE ----------------------------------------------------->
  <div class="audio-recording-page">
    <div class="content">
      <!-- Reference Clip Player & Recorder Section -->
      <div class="recording-section-container">
        <!-- Instuructions -->
        <div class="instruction-container">
          <div class="instruction-content less-padding">
            <p class="less-margin"><strong>Clip name: </strong><span class="audioname" id="audioname"></span></p>
          </div>
        </div>
        <div class="audio-player-container">
          <div class="audio-player">
            <i class="bx bx-play-circle"></i>
            <div class="waveform-container" id="reference-waveform-container"></div>
          </div>
          <div class="audio-duration">00:00</div>
        </div>
        <!-- Instuructions -->
        <div class="instruction-container">
          <div class="instruction-content">
            <p class="less-margin">
              <i class='bx bx-time-five'></i> Recording time limit: <strong><span id="leastDuration">0</span>-<span
                  id="mostDuration">0</span></strong>s.
              <br>Prioritise matching the <strong>rhythm</strong> over resembling each sound effect!
            </p>
          </div>
        </div>
        <!-- Recorder -->
        <div class="audio-player-container">
          <div class="recorder-container">
            <div id="timer">
              0.0
            </div>
            <canvas class="visualizer"></canvas>
          </div>
          <div class="recorder-container">
            <button id="recordButton" class="rbutton" type="button" disabled>Record</button><br>
          </div>
        </div>
        <!-- Post-recording Section -->
        <div class="after-recording-container">
          <!-- Instuructions -->
          <div class="instruction-container">
            <div class="instruction-content">
              <p>
                Well done!<br>Play your recording below. Re-record if needed!
              </p>
            </div>
          </div>
          <!-- Audio player for user's recording -->
          <div class="audio-player-container">
            <div class="audio-player">
              <i class="bx bx-play-circle"></i>
              <div class="waveform-container waveform-user-container"></div>
            </div>
            <div class="audio-duration">00:00</div>
          </div>
          <hr>
          <!-- Button to submit form -->
          <div class="button-container">
            <button id="submitButton" class="sbutton" type="button">Submit</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!----------------------------------------------------- POST-SUBMIT PAGE ----------------------------------------------------->
  <div class="post-submit-page">
    <!------------------------------------------------------- Mailing List ------------------------------------------------------->
    <div class="mailing-signup-box">
      <div class="mailing-signup-container">
        <div class="mailing-header">
          <h1><i class="bx bxs-envelope"></i>Join our mailing list!</h1>
        </div>
        <form class="mailing-form-container" id="mailing-form">
          <div class="mailing-form-header">
            <h2><i class='bx bx-calendar-star'></i> Receive important announcements from us, including launch dates!
              👀<br><strong>Currently, we're also entering everyone who signs up into a discount lucky draw! Tell your
                songwriter friends!</strong></h2>
            <div class="newsletter-input-box-container">
              <div class="newsletter-input-box">
                <div class="error-text newsletter-email">* Required</div>
                <input type="text" class="newsletter-input-field" id="newsletterEmailAddress"
                  placeholder="Enter your email">
              </div>
              <div class="newsletter-input-box">
                <input type="button" class="subscribe" id="newsletter-subscribe" value="Join">
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
    <div class="instruction-container">
      <div class="instruction-content">
        <p>Follow our social media page for sneak peeks!</p>
        <div type="button" class="social-media-link"
          onclick="window.open('https://www.instagram.com/beatbox.ml/','_blank')"><img
            src="css/graphics/beat-ml-logo-circular.png"><i class="bx bxl-instagram"></i>@beatbox.ml</div>
      </div>
    </div>
    <div>
      <h3 class="play-again-text">Want to try imitating a different beatbox clip? Play again!</h3>
    </div>
    <div class="button-container">

      <button class="navbackButton">Play Again</button>
    </div>
  </div>


  <!-- ERROR MESSAGE -->
  <template id="errorMsg">
    <div class="error-msg"><br>
      <h3 class="error-msg-innertext"></h3>
      <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
    </div>
  </template>

  <script src="https://www.WebRTC-Experiment.com/RecordRTC.js"></script>
  <script type="module" src="src/record_submit.js"></script>
  <script src="src/control.js"></script>

</body>

</html>
